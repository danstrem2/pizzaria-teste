<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizzaria Habibs - Pedidos Online</title>
    <link rel="stylesheet" href="style.css?v=1.2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <!-- Header -->
    <header class="header">
        <div class="header-title">
            <img src="https://cdn-icons-png.flaticon.com/512/3132/3132693.png" alt="Logo" class="logo-img">
            <span class="shop-name">Pizzaria Habibs</span>
        </div>
        <div class="header-icons">
            <i class="fas fa-search" onclick="openSearchModal()" title="Pesquisar"></i>
            <i class="fas fa-share-alt" onclick="shareStore()" title="Compartilhar"></i>
            <i class="fas fa-info-circle" onclick="openStoreInfoModal()" title="Sobre"></i>
        </div>
    </header>

    <!-- Nav Mobile Bottom -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" data-target="home">
            <i class="fas fa-home"></i>
            <span>In√≠cio</span>
        </a>
        <a href="#" class="nav-item" data-target="requests">
            <i class="fas fa-receipt"></i>
            <span>Pedidos</span>
        </a>
        <a href="#" class="nav-item" data-target="cart">
            <i class="fas fa-shopping-cart"></i>
            <span>Carrinho</span>
            <span id="cart-badge"
                style="display:none; background:red; color:white; border-radius:50%; padding:2px 5px; margin-left:-5px; font-size:10px;">0</span>
        </a>
    </nav>

    <!-- Floating Cart Bar (iFood Style) -->
    <div id="floating-cart-bar" class="floating-cart-bar" onclick="showView('cart')">
        <div class="cart-info">
            <span id="floating-count">0</span>
            <span class="cart-text">Ver Sacola</span>
        </div>
        <span id="floating-total">R$ 0,00</span>
    </div>

    <!-- VIEWS -->

    <!-- HOME VIEW -->
    <main id="home-view" class="view active">

        <!-- HERO BANNER -->
        <div class="hero-banner"
            style="position:relative; height:200px; background: linear-gradient(135deg, #ff6b35 0%, #f72c25 100%); overflow:hidden; margin:-20px -15px 20px -15px;">
            <div
                style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); text-align:center; color:white; z-index:2;">
                <div style="font-size:48px; animation: bounce 2s infinite;">üçï</div>
                <h1 style="font-size:24px; font-weight:800; margin:10px 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                    Pizzaria Habibs</h1>
                <p style="font-size:14px; opacity:0.9;">As melhores pizzas da cidade!</p>
                <div id="store-status-badge"
                    style="margin-top:15px; display:inline-flex; align-items:center; gap:8px; background:rgba(255,255,255,0.2); padding:8px 15px; border-radius:20px;">
                    <span id="store-status-dot"
                        style="width:10px; height:10px; background:#22c55e; border-radius:50%; animation: pulse 1.5s infinite;"></span>
                    <span id="store-status-text" style="font-size:13px;">Verificando...</span>
                </div>
            </div>
            <div
                style="position:absolute; bottom:0; left:0; right:0; height:30px; background: linear-gradient(to top, var(--bg-color), transparent);">
            </div>
        </div>

        <!-- Category Tabs -->
        <div class="category-tabs" id="category-tabs" style="animation: fadeInUp 0.5s ease-out;">
            <!-- Inject via JS -->
        </div>

        <!-- Highlights/Promotions Section -->
        <section id="highlights-section" style="animation: fadeInUp 0.55s ease-out; display:none;">
            <div class="section-title">‚≠ê Destaques & Promo√ß√µes</div>
            <div class="carousel" id="highlights-carousel">
                <!-- Inject via JS -->
            </div>
        </section>

        <!-- Popular Section -->
        <section style="animation: fadeInUp 0.6s ease-out;">
            <div class="section-title">üî• Os mais pedidos</div>
            <div class="carousel" id="popular-carousel">
                <!-- Inject via JS -->
            </div>
        </section>

        <!-- Product List -->
        <section id="product-sections" style="animation: fadeInUp 0.7s ease-out;">
            <!-- Inject via JS -->
        </section>

        <!-- DELIVERY AREA MAP -->
        <section style="padding:15px; margin-top:20px; animation: fadeInUp 0.8s ease-out;">
            <div class="section-title">üìç √Årea de Entrega</div>
            <div style="background:white; border-radius:12px; padding:20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                <div
                    style="position:relative; height:200px; background:linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); border-radius:8px; display:flex; align-items:center; justify-content:center; margin-bottom:15px; overflow:hidden;">
                    <div
                        style="position:absolute; width:150px; height:150px; border:3px dashed #4caf50; border-radius:50%; opacity:0.5;">
                    </div>
                    <div
                        style="position:absolute; width:100px; height:100px; border:3px dashed #8bc34a; border-radius:50%; opacity:0.7;">
                    </div>
                    <div
                        style="background:#ff5722; width:20px; height:20px; border-radius:50%; box-shadow: 0 0 20px rgba(255,87,34,0.5);">
                    </div>
                    <span style="position:absolute; bottom:10px; left:10px; font-size:12px; color:#666;">Raio de
                        ~5km</span>
                </div>
                <h4 style="margin-bottom:10px; color:#333;">Bairros Atendidos:</h4>
                <div id="delivery-neighborhoods" style="display:flex; flex-wrap:wrap; gap:8px;">
                    <!-- Injected via JS -->
                </div>
                <p id="min-delivery-fee" style="margin-top:15px; font-size:13px; color:#666; text-align:center;">
                    üõµ Taxa de entrega a partir de R$ 0,00
                </p>
            </div>
        </section>

    </main>

    <!-- ORDERS VIEW -->
    <main id="requests-view" class="view">
        <div class="cart-view">
            <div class="cart-empty">
                <i class="fas fa-book-open"></i>
                <h3>Voc√™ ainda n√£o fez nenhum pedido.</h3>
                <p>Que tal dar uma olhadinha no card√°pio?</p>
                <button class="btn-primary" onclick="showView('home')">Adicionar produtos</button>
            </div>
        </div>
    </main>

    <!-- CART VIEW -->
    <main id="cart-view" class="view">
        <div class="cart-view" id="cart-container">
            <!-- Inject via JS -->
        </div>
    </main>

    <!-- Checkout Modal -->
    <div class="modal" id="checkout-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Finalizar Pedido</h3>
                <button class="close-modal" onclick="closeCheckoutModal()">&times;</button>
            </div>

            <div style="margin-bottom: 15px;">
                <label style="display:block; margin-bottom:5px; font-weight:600;">Seu Nome:</label>
                <input type="text" id="client-name" placeholder="Ex: Jo√£o Silva"
                    style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
            </div>

            <div style="margin-bottom: 15px;">
                <label style="display:block; margin-bottom:5px; font-weight:600;">Telefone (WhatsApp):</label>
                <input type="tel" id="client-phone" placeholder="Ex: 88 99999-9999"
                    style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
            </div>

            <div style="margin-bottom: 15px;">
                <label style="display:block; margin-bottom:5px; font-weight:600;">CEP:</label>
                <div style="display:flex; gap:10px;">
                    <input type="text" id="client-cep" placeholder="Ex: 60000-000" maxlength="9"
                        style="flex:1; padding:10px; border:1px solid #ddd; border-radius:5px;">
                    <button type="button" onclick="lookupCEP()"
                        style="background:var(--primary-color); color:white; border:none; padding:10px 15px; border-radius:5px; cursor:pointer;">Buscar</button>
                </div>
                <div id="cep-status" style="font-size:12px; margin-top:5px;"></div>
            </div>

            <div style="margin-bottom: 15px;">
                <label style="display:block; margin-bottom:5px; font-weight:600;">Bairro (Taxa de Entrega):</label>
                <select id="client-neighborhood"
                    style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
                    <option value="">Selecione seu bairro...</option>
                    <!-- Injected via JS -->
                </select>
                <div id="delivery-fee-display" style="font-size:12px; color:#666; margin-top:5px;"></div>
                <div id="neighborhood-warning" style="font-size:12px; color:#ef4444; margin-top:5px; display:none;">
                </div>
            </div>

            <div style="display:flex; gap:10px; margin-bottom: 15px;">
                <div style="flex:2;">
                    <label style="display:block; margin-bottom:5px; font-weight:600;">Rua/Av:</label>
                    <input type="text" id="client-street" placeholder="Nome da Rua"
                        style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
                </div>
                <div style="flex:1;">
                    <label style="display:block; margin-bottom:5px; font-weight:600;">N√∫mero:</label>
                    <input type="text" id="client-number" placeholder="123"
                        style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
                </div>
            </div>

            <div style="margin-bottom: 15px;">
                <label style="display:block; margin-bottom:5px; font-weight:600;">Complemento/Ref:</label>
                <input type="text" id="client-complement" placeholder="Apto 101, Ao lado da padaria..."
                    style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
            </div>

            <div style="margin-bottom: 15px;">
                <label style="display:block; margin-bottom:5px; font-weight:600;">Forma de Pagamento:</label>
                <select id="payment-method" style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
                    <option value="PIX (Autom√°tico)">PIX (Autom√°tico)</option>
                    <option value="Cart√£o (Autom√°tico)">Cart√£o (Autom√°tico)</option>
                    <option value="Cart√£o (Entrega)">Cart√£o (Entrega)</option>
                    <option value="Dinheiro">Dinheiro</option>
                </select>
            </div>

            <div id="change-container" style="margin-bottom: 15px; display:none;">
                <label style="display:block; margin-bottom:5px; font-weight:600;">Troco para:</label>
                <input type="number" id="client-change" placeholder="Ex: 50"
                    style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
            </div>

            <button class="add-to-cart-btn" onclick="finalizeCheckout()">Enviar Pedido no WhatsApp</button>
        </div>
    </div>

    <!-- Product Modal -->
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Nome do Produto</h3>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <p id="modal-desc" style="color:#666; margin-bottom:15px;"></p>
            <div id="second-flavor-container" style="margin-bottom: 15px; display:none;">
                <label style="display:block; margin-bottom:5px; font-weight:600; color:var(--primary-color);">üçï
                    Adicionar 2¬∫ Sabor (Meio a Meio)?</label>
                <select id="second-flavor-select"
                    style="width:100%; padding:10px; border:1px solid #ddd; border-radius:5px;">
                    <option value="">N√£o, quero inteira</option>
                    <!-- Injected via JS -->
                </select>
                <p style="font-size:12px; color:#666; margin-top:5px;">O valor ser√° o da pizza de maior pre√ßo.</p>
            </div>

            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span style="font-weight:bold;">Observa√ß√£o:</span>
            </div>
            <textarea id="modal-obs" placeholder="Ex: Sem cebola..."
                style="width:100%; border:1px solid #ccc; padding:10px; margin-top:5px; border-radius:5px;"></textarea>

            <div style="display:flex; justify-content:space-between; align-items:center; margin-top:20px;">
                <div class="cart-controls">
                    <button class="qty-btn" onclick="adjustModalQty(-1)">-</button>
                    <span id="modal-qty">1</span>
                    <button class="qty-btn" onclick="adjustModalQty(1)">+</button>
                </div>
                <div style="font-weight:bold; font-size:18px;" id="modal-price">R$ 0,00</div>
            </div>

            <button class="add-to-cart-btn" onclick="addToCartFromModal()">Adicionar</button>
        </div>
    </div>

    <!-- Search Modal -->
    <div class="modal" id="search-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üîç Pesquisar</h3>
                <button class="close-modal" onclick="closeSearchModal()">&times;</button>
            </div>
            <input type="text" id="search-input" placeholder="Digite o nome do produto..."
                style="width:100%; padding:12px; border:1px solid #ddd; border-radius:8px; margin-bottom:15px;"
                oninput="performSearch()">
            <div id="search-results" style="max-height:300px; overflow-y:auto;"></div>
        </div>
    </div>

    <!-- Store Info Modal -->
    <div class="modal" id="store-info-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üçï Sobre a Loja</h3>
                <button class="close-modal" onclick="closeStoreInfoModal()">&times;</button>
            </div>
            <div style="text-align:center; padding:10px;">
                <img src="https://cdn-icons-png.flaticon.com/512/3132/3132693.png" alt="Logo"
                    style="width:80px; margin-bottom:15px;">
                <h2 id="store-info-name" style="margin-bottom:10px;">Pizzaria Habibs</h2>
                <p id="store-info-slogan" style="color:#666; margin-bottom:15px;">As melhores pizzas da cidade!</p>
                <div style="text-align:left; background:#f8f9fa; padding:15px; border-radius:10px;">
                    <p><i class="fas fa-phone" style="color:var(--primary-color); width:25px;"></i> <span
                            id="store-info-phone">(88) 99999-9999</span></p>
                    <p><i class="fas fa-map-marker-alt" style="color:var(--primary-color); width:25px;"></i> <span
                            id="store-info-address">Rua das Pizzas, 123</span></p>
                    <p><i class="fas fa-clock" style="color:var(--primary-color); width:25px;"></i> Entrega em ~<span
                            id="store-info-delivery-time">40</span> min</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.8/jquery.inputmask.min.js"></script>
    <!-- Load Config First -->
    <script src="config.js?v=1.0"></script>
    <!-- Dynamic Load to prevent Cache -->
    <script>
        const v = Date.now();
        document.write(`<script src="data.js?v=${v}"><\/script>`);
        // Dynamic Script Loading to bust cache for script.js
        const script = document.createElement('script');
        script.src = `script.js?v=${v}`;
        document.body.appendChild(script);
    </script>
</body>

</html>